## 1.在 WEB上部署茴香豆技术助手
一、前期准备

进行微信机器人的集成与测试，需确保以下设备与资源：

设备要求：使用任意一款Android手机，对硬件性能及操作系统版本无特定需求。
软件环境：确保手机上安装的是微信版本8.0.47。此版本对ViewID有强绑定要求，其他版本可能无法实现预期效果。
测试账号：准备一个用于测试的微信账号。
二、构建知识库

访问茴香豆web版OpenXLab浦源-应用中心，执行以下步骤：

创建知识库：自行创建一个新的知识库，或使用预设的测试账号进行快速体验。
获取回调地址：按照官方教程指引，完成回调地址的设置。
三、部署与运行

下载安装：从GitHub Release页面下载预先编译好的apk文件，并安装至Android手机。留意微信在传输apk文件时可能会自动为其添加.0后缀。

配置机器人：

填写回调地址：在应用中输入web版提供的回调地址，点击“确定”以保存设置。
开启/关闭回复功能：点击“点我”按钮，找到并切换“茴香豆LLM RAG回复”的开关状态。
四、互动测试

保持运行：在进行测试期间，保持机器人应用后台运行，避免被系统清理。
邀请互动：进入指定的微信群聊界面，邀请他人发送消息以体验机器人回复功能。
消息限制：为防止消息泛滥与误触发，系统设定每5秒内同一用户只能发送一条消息。
重复问题处理：针对同一用户提出的相同问题，机器人仅作首次回答，避免重复回复。
五、调试与上线

调试模式：在UI界面上启用“调试模式”，以便在测试过程中观察机器人响应情况。确认功能无误后，务必关闭调试模式，以避免机器人对所有提问进行无差别回复。

## 2.在 InternLM Studio 上部署茴香豆技术助手
笔记：# RAG 技术概述与茴香豆应用

RAG（Retrieval Augmented Generation）技术是一种结合检索和生成的方法，旨在提高大型语言模型（LLMs）在知识密集型任务中的性能。通过检索与用户输入相关的信息片段，并结合外部知识库，RAG技术能够生成更准确、更丰富的回答。这对于解决LLMs在处理复杂问题时可能遇到的挑战，如幻觉、知识过时和缺乏透明、可追溯的推理过程等问题，具有重要意义。

## 茴香豆应用

茴香豆是一款基于RAG技术构建的群聊助手，它能够快速、高效地搭建起针对特定知识领域的助手。茴香豆利用RAG技术，实现了非参数化的知识更新，即使在没有额外训练的情况下，也能掌握新领域的知识，从而提供准确的回答、降低推理成本，并实现外部记忆。

### 环境配置

在Intern Studio服务器上部署茴香豆，首先需要配置开发机系统，选择适合的镜像和资源配置。接着，复制运行InternLM的基础环境，并激活相应的Python虚拟环境。此外，还需下载并安装所需的模型文件和依赖包。

### 使用茴香豆搭建RAG助手

#### 修改配置文件

配置文件中需要指定模型路径，包括用于向量数据库和词嵌入的模型、检索的重排序模型，以及大模型的路径。

#### 创建知识库

通过下载和提取Huixiangdou的语料，创建向量数据库，茴香豆能够将输入问题与接受和拒绝问题列表中的问题进行相似性比较，从而精确判断提问的相关性，并生成准确的回答。

#### 运行茴香豆知识助手

运行茴香豆后，可以测试其效果。RAG技术的优势在于，即使没有对基础模型进行额外训练，也能根据提供的知识库生成准确的答案。

RAG技术结合茴香豆应用，为构建知识密集型问答系统提供了一种有效的解决方案。通过非参数化的知识更新和外部记忆，茴香豆能够快速适应新的知识领域，提供准确、丰富的回答，极大地提高了群聊助手的实用性和效率。
![image](https://github.com/ccly1996/InternLMClass/assets/39228103/50f124f2-a669-4a7c-b180-3a75962b706f)
